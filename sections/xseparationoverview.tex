\section{Approach for bidirectional mapping}
\label{sec:approach}
%Compared to other code generation approaches, the philosophy of XSeparation is different.
This section presents our bidirectional mapping approach.% to establish a bidirectional mapping between architecture model and code.


\subsection{Approach overview}
%The reason that makes the model-code synchronization hard is the lack of a bidirectional mapping between architecture and implementation.
Current programming language elements are at a lower level of abstraction than architecture elements \cite{DeSilva2012}.
To establish a bidirectional mapping, we therefore raise the abstraction level of a standard programming language by introducing additional programming constructs.
We demonstrate the case, in which the programming language is C++.

Fig. \ref{fig:mappingoverview} shows the overview of our approach.
From a standard programming language, the additional constructs are created to form an \tb{Extended Programming Language}, which is the working language for programmers.
We establish a bidirectional mapping between the architecture model and the \tb{Extended code}, which conforms to the extended language.
The latter is semantically closer to the architecture since it adds language constructs for modeling concepts that have no direct representation in common object-oriented languages, notably ports, connectors and state-machine elements. 
At the same time, it is as close as possible to the existing standard language in order to minimize additional learning efforts.

The additional constructs are created by using specialized mechanisms of the standard language such as templates, and macros in C++ and annotations in Java.
The \tb{Extended code} containing the additional constructs is syntactically conforming to the standard programming language. 
By this way, the \tb{Extended code} can seamlessly reuse legacy code written in the standard programming language and programming facilities such as syntax highlighting and auto-completion in Integrated Development Environments (IDEs) for assisting the development of the \tb{Extended code}. 
\tb{Extended code} is translated into \tb{Standard code}. \tb{Extended code} and \tb{Extended code} are then combined to be executable.

In the next subsection, we present the additional constructs with an illustrative example.


\begin{figure}
	\centering
	\includegraphics[clip, trim=0cm 15cm 9.1cm 0cm, width=\columnwidth]{figures/mappingoverview.pdf}
	\caption{Approach overview} 
	\label{fig:mappingoverview}
\end{figure}

\input{sections/mapping}

\input{sections/compilation}